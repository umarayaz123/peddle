<div class="bodyholder">
  <div class="container">

    <div class="signin_holder">
      <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
          <%= devise_error_messages! %>
          <div class="top_login_bg"></div>
          <div class="mid_login_bg">
            <div class="signin_heading">Creat Your Account</div>
            <div class="signin_text">Already have a peddle Online Account <a href="/sign_in">Sign-in</a></div>
            <div class="signin_input_holder">
              <label>Full Name</label>
              <%= f.text_field :name %>
            </div>
            <div class="checkbox_holder">
              <div class="checkbox_input_holder">
                <%= check_box_tag 'seller' %>
                <%#= radio_button_tag 'type', 'seller' %>
                <label>Seller</label>

              </div>
              <%#= hidden_field_tag "package", @package %>
              <div class="checkbox_input_holder">
                <%= check_box_tag 'buyer' %>
                <%#= radio_button_tag 'type', 'buyer' %>
                <label>Buyer</label>
              </div>
              <!--<div class="checkbox_input_holder">-->
              <!--<input type="checkbox" value="">-->
              <!--<label>Both</label>-->
              <!--</div>-->
            </div>
            <div class="store_name signin_small_input_holder">
              <label>Store Name</label>
              <%= text_field_tag 'store_name' %>
              <p>.peddleonline.com</p>
            </div>
            <div class="store_name signin_small_input_holder">
              <label>Package</label>
              <%= select_tag 'package', options_for_select([["Start-up", 1], ["Time to Grow 70$/mo", 2], ["Corporation $20/mo", 3], ["Enterprise $175/mo", 4]], params[:package]) %>
            </div>
            <div id="billingForm" style=" display:none;">

              <div class="store_name signin_small_input_holder">
                <label>Card Type</label><br/>
                <%= select_tag :card_type, options_for_select([["Visa", "visa"], ["MasterCard", "master"], ["Discover", "discover"], ["American Express", "american_express"]]) %>
              </div>

              <div class="store_name signin_small_input_holder">
                <label>Card Number</label><br/>
                <%= text_field_tag :card_number %>
              </div>

              <div class="store_name signin_small_input_holder">
                <label>Card Verification Value (CVV)</label><br/>
                <%= text_field_tag :card_verification %>
              </div>

              <div class="store_name signin_small_input_holder">
                <label>Expiration Date</label><br/>
                <%= date_select "card_expires_on", "", :discard_day => true, :start_year => Date.today.year, :end_year => (Date.today.year+10), :add_month_numbers => true %>
              </div>

              <div class="store_name signin_small_input_holder">
                <label>First Name</label><br/>
                <%= text_field_tag :first_name %>
              </div>

              <div class="store_name signin_small_input_holder">
                <label>Last Name</label><br/>
                <%= text_field_tag :last_name %>
              </div>

              <div class="store_name signin_small_input_holder">
                <label>Billing Address</label><br/>
                <%= text_field_tag :billing_address %>
              </div>

              <div class="store_name signin_small_input_holder">
                <label>City</label><br/>
                <%= text_field_tag :billing_city %>
              </div>

              <div class="store_name signin_small_input_holder">
                <%= select_tag :billing_country, options_for_select(Carmen.countries(:locale => 'en')) %>
              </div>

              <div class="store_name signin_small_input_holder">
                <label>State</label><br/>
                <%= select_tag :billing_state, options_for_select(Carmen::states('US')) %>
              </div>

              <div class="store_name signin_small_input_holder">
                <label>Zip</label><br/>
                <%= number_field_tag :billing_zip %>
              </div>
            </div>
            <div class="signin_input_holder">
              <label>Email</label>
              <%= f.email_field :email %>
            </div>
            <!--<div class="signin_input_holder">-->
            <!--<label>Re-type Your Email</label>-->
            <!--<input type="text" value="">-->
            <!--</div>-->

            <div class="signin_small_input_holder">
              <label>Password</label>
              <%= f.password_field :password %>

              <p>must be at least 6 characters in length</p>
            </div>
            <div class="signin_small_input_holder">
              <%= f.password_field :password_confirmation %>

              <p>Please enter your password again.</p>
            </div>

            <div class="signin_text">By clicking Sign Up you agree to the <a href="#">Terms of Service</a> and
              <a href="#">Privacy Policy</a>and confirm that you are at least 18 years old.
            </div>
            <div class="checkbox_holder">
              <div class="checkbox_input_holder_small">
                <input id="terms" type="checkbox" value="">
                <label>I HAVE READ AND AGREED TO THE FOLLOWING TERMS AND CONDITIONS</label>
              </div>
            </div>

            <div class="submit_holder">
              <input id="submit_button" type="submit" value="Sign Up">
            </div>
          </div>
          <div class="bot_login_bg"></div>
      <% end %>
    </div>


  </div>
</div>

<script>
    $(document).ready(function() {
        if ($('#terms').is(":checked")) {
            $('#submit_button').attr('disabled', false);
        }
        else {
            $('#submit_button').attr('disabled', true);
        }

        $('#buyer').click(function() {
            if ($('#buyer').is(':checked')) {
                $('#seller').attr('checked', false);
                $('.store_name').slideUp();
                $("#billingForm").slideUp();
            }
            else {
                $('#store_name').show();
            }
        });
        $('#seller').click(function() {
            if ($('#seller').is(':checked')) {
                $('#buyer').attr('checked', false);
                $('.store_name').slideDown();
                if ($("#package").val() != "1") {
                    $("#billingForm").slideDown();
                }
            }
        });
        $('#terms').click(function() {
            if ($('#terms').is(":checked")) {
                $('#submit_button').attr('disabled', false);
            }
            else {
                $('#submit_button').attr('disabled', true);
            }
        });

        if ($("#package").val() != "1") {
            $("#billingForm").show();
        }

        $("#package").change(function() {
            if ($("#package").val() != "1") {
                $("#billingForm").slideDown();
            }
            else {
                $("#billingForm").slideUp();
            }
        });
        $("#billing_country").change(function() {
            var country = $(this).val();
            $.ajax({
                url: "/get_states?country=" + country,
                success: function(response) {
                    $("#billing_state").replaceWith(response);
                }
            });
        });
        $("#store_name").live('blur',function(){
            var store_name = $(this).val();
//            alert(store_name);
            $.ajax({
                url: "/check_store?store_name="+store_name,
                success: function(response) {
                    if(response == "true"){
                        alert("Store with this name already exist. Please choose another Store name");
                    }
                }
            });
        });

        $("#user_email").live('blur',function(){
            var email = $(this).val();
//            alert(store_name);
            $.ajax({
                url: "/check_email?email="+email,
                success: function(response) {
                    if(response == "true"){
                        alert("Email Address Already taken. please choose another email");
                    }
                }
            });
        });

    });
</script>
